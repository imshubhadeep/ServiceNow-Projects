<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="DELETE">
        <access>package_private</access>
        <active>false</active>
        <api_name>x_1130583_custom_a.UserSearchAjax</api_name>
        <caller_access/>
        <client_callable>true</client_callable>
        <description/>
        <mobile_callable>false</mobile_callable>
        <name>UserSearchAjax</name>
        <sandbox_callable>false</sandbox_callable>
        <script><![CDATA[var UserSearchAjax = Class.create();
UserSearchAjax.prototype = Object.extendsObject(AbstractAjaxProcessor, {
 searchUsers: function() {
   // param: sysparm_query (text typed by user)
   var q = this.getParameter('sysparm_query') || '';
   var max = 15;
   var arr = [];
   if (q.length < 1) {
     return new JSON().encode(arr);
   }
   var gr = new GlideRecord('sys_user');
   // basic search on name, user_name, email
   gr.addEncodedQuery('active=true^ORDERBYname');
   gr.addQuery('name', 'CONTAINS', q);
   var qc = gr.addQuery('user_name', 'CONTAINS', q);
   qc.addOrCondition('email', 'CONTAINS', q);
   gr.setLimit(max);
   gr.query();
   while (gr.next()) {
     arr.push({
       sys_id: gr.getValue('sys_id'),
       name: gr.getValue('name'),
       user_name: gr.getValue('user_name'),
       email: gr.getValue('email')
     });
   }
   return new JSON().encode(arr);
 },
 getAssigneeStats: function() {
   // param: sysparm_user_sysid OR sysparm_user_name (display)
   var sysid = this.getParameter('sysparm_user_sysid');
   var name = this.getParameter('sysparm_user_name');
   if (!sysid && name) {
     var u = new GlideRecord('sys_user');
     u.addQuery('name', name);
     u.query();
     if (u.next()) sysid = u.getValue('sys_id');
   }
   if (!sysid)
     return this._encode({error: "user_not_found"});
   var gr = new GlideAggregate('incident');
   gr.addAggregate('COUNT');
   gr.addQuery('assigned_to', sysid);
   gr.query();
   var cnt = 0;
   if (gr.next()) cnt = parseInt(gr.getAggregate('COUNT'), 10);
   return this._encode({sys_id: sysid, count: cnt});
 },
 _encode: function(obj) {
   return new JSON().encode(obj);
 },
 type: 'UserSearchAjax'
});]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-09-28 07:49:42</sys_created_on>
        <sys_id>4c6458c1c3503210f6e5f3cc050131bb</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>UserSearchAjax</sys_name>
        <sys_package display_value="Custom Asset Management" source="x_1130583_custom_a">4adc985fc3c62210f6e5f3cc05013150</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Custom Asset Management">4adc985fc3c62210f6e5f3cc05013150</sys_scope>
        <sys_update_name>sys_script_include_4c6458c1c3503210f6e5f3cc050131bb</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-10-06 08:17:28</sys_updated_on>
    </sys_script_include>
    <sys_es_latest_script action="DELETE">
        <id>4c6458c1c3503210f6e5f3cc050131bb</id>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-09-28 07:49:41</sys_created_on>
        <sys_id>8a3b5c09c3503210f6e5f3cc0501318b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-09-28 07:49:41</sys_updated_on>
        <table>sys_script_include</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="Custom Asset Management">4adc985fc3c62210f6e5f3cc05013150</application>
        <file_path/>
        <instance_id>7d33805c3bbf8ad4986d048aa4e45ae4</instance_id>
        <instance_name>dev283179</instance_name>
        <name>sys_script_include_4c6458c1c3503210f6e5f3cc050131bb</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;false&lt;/active&gt;&lt;api_name&gt;x_1130583_custom_a.UserSearchAjax&lt;/api_name&gt;&lt;caller_access/&gt;&lt;client_callable&gt;true&lt;/client_callable&gt;&lt;description/&gt;&lt;mobile_callable&gt;false&lt;/mobile_callable&gt;&lt;name&gt;UserSearchAjax&lt;/name&gt;&lt;sandbox_callable&gt;false&lt;/sandbox_callable&gt;&lt;script&gt;&lt;![CDATA[var UserSearchAjax = Class.create();
UserSearchAjax.prototype = Object.extendsObject(AbstractAjaxProcessor, {
 searchUsers: function() {
   // param: sysparm_query (text typed by user)
   var q = this.getParameter('sysparm_query') || '';
   var max = 15;
   var arr = [];
   if (q.length &lt; 1) {
     return new JSON().encode(arr);
   }
   var gr = new GlideRecord('sys_user');
   // basic search on name, user_name, email
   gr.addEncodedQuery('active=true^ORDERBYname');
   gr.addQuery('name', 'CONTAINS', q);
   var qc = gr.addQuery('user_name', 'CONTAINS', q);
   qc.addOrCondition('email', 'CONTAINS', q);
   gr.setLimit(max);
   gr.query();
   while (gr.next()) {
     arr.push({
       sys_id: gr.getValue('sys_id'),
       name: gr.getValue('name'),
       user_name: gr.getValue('user_name'),
       email: gr.getValue('email')
     });
   }
   return new JSON().encode(arr);
 },
 getAssigneeStats: function() {
   // param: sysparm_user_sysid OR sysparm_user_name (display)
   var sysid = this.getParameter('sysparm_user_sysid');
   var name = this.getParameter('sysparm_user_name');
   if (!sysid &amp;&amp; name) {
     var u = new GlideRecord('sys_user');
     u.addQuery('name', name);
     u.query();
     if (u.next()) sysid = u.getValue('sys_id');
   }
   if (!sysid)
     return this._encode({error: "user_not_found"});
   var gr = new GlideAggregate('incident');
   gr.addAggregate('COUNT');
   gr.addQuery('assigned_to', sysid);
   gr.query();
   var cnt = 0;
   if (gr.next()) cnt = parseInt(gr.getAggregate('COUNT'), 10);
   return this._encode({sys_id: sysid, count: cnt});
 },
 _encode: function(obj) {
   return new JSON().encode(obj);
 },
 type: 'UserSearchAjax'
});]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2025-09-28 07:49:42&lt;/sys_created_on&gt;&lt;sys_id&gt;4c6458c1c3503210f6e5f3cc050131bb&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;UserSearchAjax&lt;/sys_name&gt;&lt;sys_package display_value="Custom Asset Management" source="x_1130583_custom_a"&gt;4adc985fc3c62210f6e5f3cc05013150&lt;/sys_package&gt;&lt;sys_policy&gt;read&lt;/sys_policy&gt;&lt;sys_scope display_value="Custom Asset Management"&gt;4adc985fc3c62210f6e5f3cc05013150&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_4c6458c1c3503210f6e5f3cc050131bb&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2025-10-06 08:17:28&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;sys_es_latest_script action="INSERT_OR_UPDATE"&gt;&lt;id&gt;4c6458c1c3503210f6e5f3cc050131bb&lt;/id&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2025-09-28 07:49:41&lt;/sys_created_on&gt;&lt;sys_id&gt;8a3b5c09c3503210f6e5f3cc0501318b&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2025-09-28 07:49:41&lt;/sys_updated_on&gt;&lt;table&gt;sys_script_include&lt;/table&gt;&lt;use_es_latest&gt;true&lt;/use_es_latest&gt;&lt;/sys_es_latest_script&gt;&lt;/record_update&gt;</payload>
        <payload_hash>1945651595</payload_hash>
        <record_name>UserSearchAjax</record_name>
        <reverted_from/>
        <source>3d8d9c1fc3c62210f6e5f3cc050131df</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-10-06 08:17:28</sys_created_on>
        <sys_id>c34e6127c398f610f6e5f3cc05013132</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>199b898d7b30000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-10-06 08:17:28</sys_updated_on>
        <type>Script Include</type>
        <update_guid>4b4e6127f898f6108ade6763f56cc831</update_guid>
        <update_guid_history>4b4e6127f898f6108ade6763f56cc831:1945651595,623b58c9665032103ca6dbf774be82c1:-1916164550</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-10-06 13:05:27</sys_created_on>
        <sys_db_object display_value="" name="sys_script_include">sys_script_include</sys_db_object>
        <sys_id>1de40cb2e73f483cb5d52409ceab2110</sys_id>
        <sys_metadata>4c6458c1c3503210f6e5f3cc050131bb</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>UserSearchAjax</sys_name>
        <sys_package display_value="Custom Asset Management" source="x_1130583_custom_a">4adc985fc3c62210f6e5f3cc05013150</sys_package>
        <sys_parent/>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Custom Asset Management">4adc985fc3c62210f6e5f3cc05013150</sys_scope>
        <sys_scope_delete display_value="">216aad2cb7864bd48a408ee74b5b0210</sys_scope_delete>
        <sys_update_name>sys_script_include_4c6458c1c3503210f6e5f3cc050131bb</sys_update_name>
        <sys_update_version display_value="sys_script_include_4c6458c1c3503210f6e5f3cc050131bb">c34e6127c398f610f6e5f3cc05013132</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-10-06 13:05:27</sys_updated_on>
    </sys_metadata_delete>
</record_update>
